<!-- This shows the admin page -->

{% extends "layout.html" %}
{% block block1 %}
<script>
/* A script to hide the row in a table.
The element is hidden based on the button clicked having the same data value
as the id value of the table row id. These should both be unique.
*/
function removeRow(button) {
    "use strict";
    var tr = document.getElementById(button.getAttribute("data"));
    // console.log(tr);
    tr.style.display = "none";
    // button.style.display = 'none';
}

function toggleEquip(button, itemType) {
    "use strict";
    console.log(button);
    console.log(itemType);
    //console.log(slotText);
    var slot = document.getElementById(itemType);
    var tr = document.getElementById(button.getAttribute("data"));
    if (button.innerHTML === "Equip") {
        button.innerHTML = "Unequip";
        slot.appendChild(tr);
    } else if (button.innerHTML === "Unequip") {
        slot = document.getElementById("non_equipped_items");
        button.innerHTML = "Equip";
        slot.appendChild(tr);
    }
}
</script>   
<!-- This is the inventory page and displays everything your character wears/owns and gives you CMD buttons to equip/unequip -->
      <h1>Equipped:</h1>
      <table id="equipped_items">
      {%- for item in hero.equipped_items() %}
        <h2>Helmet:</h2>
        <div id="Head_Armour">{% if item.head_armour %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Shirt:</h2>
        <div id="Chest_Armour">{% if item.chest_armour %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Right Hand:</h2>
        <div id="One_Handed_Weapon">{% if item.one_handed_weapon %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Left Hand:</h2>
        <div id="Shield">{% if item.shield %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Both Hands:</h2>
        <div id="Two_Handed_Weapon">{% if item.two_handed_weapon %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Sleeves:</h2>
        <div id="Arm_Armour">{% if item.arm_armour %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Gloves:</h2>
        <div id="Hand_Armour">{% if item.hand_armour %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Rings:</h2>
        <div id="Ring">{% if item.ring %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Pants:</h2>
        <div id="Leg_Armour">{% if item.leg_armour %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
        <h2>Shoes:</h2>
        <div id="Feet_Armour">{% if item.feet_armour %}
            <tr id="{{ item.id }}">
                <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
                <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
            </tr>{% endif %}
        </div>
      {%- endfor %}
      </table>
     <h1>Inventory:</h1>
     <table id="non_equipped_items">
        {%- for item in hero.non_equipped_items() %}
        {%- if item.wearable %}
        <tr id="{{ item.id }}">
            <td>{{ item.name }} -- Durability: {{ item.durability }}/{{ item.max_durability }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
            <td><button class="command" data="{{ item.id }}" data-function="toggleEquip">Equip</button></td>
        </tr>
        {%- elif item.consumable %}
        <tr id="{{ item.id }}">
            <td>{{ item.amount_owned }} {{ item.name }} {% if item.broken %}<font style="color:red">broken</font>{% endif %}</td>
            <td><button class="command" data="{{ item.id }}" onClick="removeRow(this)">Consume</button></td>
        </tr>{% endif %}
        {%- endfor %}
      </table>
{%- endblock -%}

