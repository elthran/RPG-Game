{% extends "profile_template.html" %}
{% block block1 %}
<!-- This is the ability page. It let's you learn/upgrade abilities -->

<h1 style="text-align:center;">{{ ability_tree.title() }} Abilities</h1>
<div class="stickyPointsRemainingBar">Points Remaining: <div style="display: inline" id="points_remaining">{{ hero.basic_ability_points }}</div></div>
<div style="clear: both;"></div>
<div>
	<div class="leftPageHalf" style="width:65%;">
        <ul>
        {% for ability in all_abilities %}
            <li>
            <button class="proficiencyTooltipTrigger" data-py-function="change_ability_tooltip" data="{{ ability.id }}" data-js-callback="abilityTooltip">{{ ability.name }} (Current level: <div style="display: inline" id="ability-{{ ability.id }}">{{ ability.level }}</div>)</button>
            <button class="upgradeButton" data-py-function="update_ability" data="{{ ability.id }}" id="abilityButton-{{ ability.id }}" data-js-callback="updateAbility" {% if myHero.basic_ability_points <= 0 %}style="display: none"{% endif %}></button>
            </li>
        {% endfor %}
        </ul>
    </div>
    <div class="attributeTooltip">
        <div><span id="attributeTooltip">Click on an attribute to see more information.</span></div>
        <div><span id="attributeImage"></span></div>
    </div>
</div>
<div style="clear:both;"></div>

{% if ability_tree == "archetype" %}
    {% if hero.archetype == None %}
<div>
    <div class="popuparchetypecontainer" onclick="archetype_popup('brute')"><img class="archetypeImages" src="/static/images/archetype_brute.jpg">
    </div>
    <div class="popuparchetypecontainer" onclick="archetype_popup('scoundrel')"><img class="archetypeImages" src="/static/images/archetype_scoundrel.jpg">
    </div>
    <div class="popuparchetypecontainer" onclick="archetype_popup('ascetic')"><img class="archetypeImages" src="/static/images/archetype_ascetic.jpg">
    </div>
    <div class="popuparchetypecontainer" onclick="archetype_popup('survivalist')"><img class="archetypeImages" src="/static/images/archetype_survivalist.jpg">
    </div>
    <div class="popuparchetypecontainer" onclick="archetype_popup('philosopher')"><img class="archetypeImages" src="/static/images/archetype_philosopher.jpg">
    </div>
    <div class="popuparchetypecontainer" onclick="archetype_popup('opportunist')"><img class="archetypeImages" src="/static/images/archetype_opportunist.jpg">
    </div>
</div>
<div>
    <span class="popuparchetypemessage" id="popuparchetype">
        <span class="popuparchetypechangingmessage" id="js_popupbrute">
            <h1>Brute</h1>
            <p>A character who uses strength and combat to solve problems. Proficient with many types of weapons.</p>
            <ul style="color:red">Requirements:
                <li>Brawn ~ 6</li>
                <li>Any Weapon Talent ~ 10</li>
                <li><button data="Brute" data-js-callback="refreshPage" data-py-function="become_archetype">Become Brute</button></li>
            </ul>
        </span>
        <span class="popuparchetypechangingmessage" id="js_popupscoundrel">
            <h1>Scoundrel</h1>
            <p>A character who uses deception and sneakiness to accomplish their goals. Excels at stealth attacks and thievery.</p>
            <ul style="color:red">Requirements:
                <li>Dagger Talent ~ 6</li>
                <li>Virtue ~ -100</li>
                <li><button data="Scoundrel" data-js-callback="refreshPage" data-py-function="become_archetype">Become Scoundrel</button></li>
            </ul>
        </span>
        <span class="popuparchetypechangingmessage" id="js_popupascetic">
          <h1>Ascetic</h1>
          <p>A character who focuses on disciplining mind and body. They use a combination of combat and intellect.</p>
            <ul style="color:red">Requirements:
                <li>Errands Completed ~ 10</li>
                <li>Virtue ~ +100</li>
                <li>Willpower ~ 4</li>
                <li><button data="Ascetic" data-js-callback="refreshPage" data-py-function="become_archetype">Become Ascetic</button></li>
            </ul>
        </span>
        <span class="popuparchetypechangingmessage" id="js_popupsurvivalist">
          <h1>Survivalist</h1>
          <p>A character who utilizes their environment to adapt and thrive. Excellent at long ranged weaponry and exploration.</p>
            <ul style="color:red">Requirements:
                <li>Locations Discovered ~ 5</li>
                <li>Animals in Bestiary ~ 10</li>
                <li><button data="Survivalist" data-js-callback="refreshPage" data-py-function="become_archetype">Become Survivalist</button></li>
            </ul>
        </span>
        <span class="popuparchetypechangingmessage" id="js_popupphilosopher">
          <h1>Philosopher</h1>
          <p>A character who uses intellect to solve problems. Excels at any task requiring powers of the mind.</p>
            <ul style="color:red">Requirements:
                <li>Intellect ~ 7</li>
                <li>Books Read ~ 10</li>
                <li><button data="Philosopher" data-js-callback="refreshPage" data-py-function="become_archetype">Become Philosopher</button></li>
            </ul>
        </span>
        <span class="popuparchetypechangingmessage" id="js_popupopportunist">
          <h1>Opportunist</h1>
          <p>A character who solves problems using speech and dialogue.</p>
            <ul style="color:red">Requirements:
                <li>Charisma ~ 7</li>
                <li>Fame ~ +200</li>
                <li><button data="Opportunist" data-js-callback="refreshPage" data-py-function="become_archetype">Become Opportunist</button></li>
            </ul>
        </span>
    </span>
</div>
    {% else %}
        <h1 style="text-align:center;">{{myHero.archetype }} Abilities</h1>
        Archetype Points:
        <div style="display: inline" id="archetype_points_remaining">{{ myHero.archetype_ability_points }}</div>
        <h2 style="text-align:left;">Archetype Abilities</h2>
        {% for ability in myHero.abilities if ability.tree == ability_tree and ability.hidden == False  %}
            <h3>{{ ability.name }}</h3>
            <div style="display: inline" id="ability-{{ ability.id }}">{{ ability.level }}</div>/{{ ability.max_level }}</b>
            <span id="tooltipPopup-{{ ability.id }}">
                <div style="display: inline" id="ability-{{ ability.id }}-description">{{ ability.get_description() }}</div>
                {% for name in ability.requirements %}
                    <br>&bull; {{ name | title }} {{ ability[name] }}
                {% else %}
                    <br>Cost: 1 Skill Point
                {% endfor %}
            </span>
            <button data="{{ ability.id }}, {{ ability.tree }}" data-js-callback="updateAbility" data-py-function="update_ability">Learn</button>
        {% else %}
            No Abilities Available
        {% endfor %}
    {% endif %}
{% elif ability_tree == "calling" %}
Under Construction
{% elif ability_tree == "religious" %}
    {% if hero.religion == None %}
        <div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
        </div>
        <div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
            <div class="religioncontainer"><h1>Unknown</h1></div>
        </div>
    {% else %}
        <div style="display: inline" id="religion_points_remaining">{{ myHero.religion_ability_points }}</div>
        Current Religion: {{ myHero.religion }}
    {% endif %}
{% endif %}

{% endblock %}


