import flask

from elthranonline import app
import services.decorators
import models


@app.route('/tavern/<name>', methods=['GET', 'POST'])
@services.decorators.login_required
@services.decorators.uses_hero
def tavern(name='', hero=None):
    location = models.Location.filter_by(type='tavern', name=name).one()
    is_tavern = True
    # TODO migrate 'tavern_data.py' into some sort of autogenerated quest path/object thingy?
    dialogue_options = {}
    return flask.render_template(
        'tavern.html', hero=hero, page_title=location.display.page_title,
        page_heading=location.display.page_heading, page_image=location.display.page_image, paragraph=location.display.paragraph,
        tavern=is_tavern, dialogue_options=dialogue_options)
